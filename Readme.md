# üåÜ Hybrid Search RAG for UHI Mitigation Strategies

A hybrid retrieval-augmented generation (RAG) system that leverages both **dense** and **sparse** retrieval techniques to answer queries on **Urban Heat Island (UHI) mitigation strategies**. This project combines **HuggingFace embeddings**, **BM25 sparse retrieval**, and **LLaMA inference via Groq API**, powered by **Pinecone**, **FastAPI**, and **LangChain**.

---

## üîß Tech Stack

| Technology | Purpose |
|------------|---------|
| **Python** | Core programming language |
| **FastAPI** | Lightweight web server to expose API endpoints |
| **LangChain** | Framework to orchestrate hybrid retrieval and prompting |
| **Pinecone** | Vector and sparse index database backend |
| **HuggingFace** | Text embeddings using `all-MiniLM-L6-v2` |
| **BM25Encoder** | Sparse BM25 encoding (via `pinecone-text`) |
| **LLaMA via Groq API** | Language model for final answer generation |
| **docker** | Deploying in Huggingface Spaces |
| **dotenv** | Managing environment variables securely |

---

## ‚öôÔ∏è Internal Pipeline

1. Query is embedded using `HuggingFaceEmbeddings`
2. BM25 sparse encoding via `BM25Encoder`
3. Hybrid search with `PineconeHybridSearchRetriever`
4. Top-k documents used as context for LLaMA via Groq API
5. Response is generated and returned as JSON
---

## üì° API Endpoints ‚Äì Hybrid Search RAG for UHI Mitigation

This FastAPI app exposes a single primary endpoint for querying UHI mitigation strategies using a hybrid search and LLM-based RAG pipeline.

---

### üöÄ POST `/query`

Query the system for UHI mitigation strategies using hybrid retrieval (dense + sparse) and Groq-hosted LLaMA for answer generation.

### üî∏ Request Body

```json
{
  "query": "How can green roofs help reduce urban heat island effects?"
}
```

| Field  | Type   | Required | Description                                   |
|--------|--------|----------|-----------------------------------------------|
| query  | string | ‚úÖ Yes   | The natural language question to be answered. |

---

### üî∏ Response

```json
{
  "answer": "Green roofs help reduce Urban Heat Island effects by adding insulation and vegetation that cools the air through evapotranspiration..."
}
```

| Field   | Type   | Description                                |
|---------|--------|--------------------------------------------|
| answer  | string | Final response generated by the LLM        |

---

### üî∏ Possible Errors

| HTTP Code | Description                              |
|-----------|------------------------------------------|
| `400`     | Invalid request body                     |
| `500`     | Internal server error or API key failure |

---
## üöÄ Live Demo

You can try out the **Hybrid Search RAG for UHI Mitigation** project live on **Hugging Face Spaces**:
```
curl -X POST "https://Prithivi-nanda-UHI-mitigation.hf.space/query" -H "Content-Type: application/json" \
-d '{"query": "What is UHI mitigation strategies?", "model": "llama3-70b-8192", "temperature": 0.1}'
```